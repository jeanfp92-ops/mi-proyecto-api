:root { --pad: 14px; --radius: 16px; --gap: 16px; }

body{ font-family:system-ui, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:#f6f7fb; }
header{ background:#1b4332; color:#fff; padding:16px 20px; font-weight:600; }
.wrap{ max-width:1200px; margin:0 auto; padding:20px; }
.grid{ display:grid; grid-template-columns:1fr; gap:var(--gap); }
@media (min-width:1060px){ .grid{ grid-template-columns:1fr 2fr; } }

.card{ background:#fff; border-radius:var(--radius); padding:var(--pad); box-shadow:0 10px 26px rgba(0,0,0,.06); }
h3{ margin-top:0; }
label{ display:block; font-size:12px; color:#333; margin:8px 0 4px; }
input[type="number"],input[type="text"]{ width:100%; padding:10px; border:1px solid #ddd; border-radius:10px; background:#fafafa; }
button{ padding:10px 14px; border:none; border-radius:12px; background:#1f7aec; color:#fff; cursor:pointer; }

table{ width:100%; border-collapse:collapse; }
th,td{ text-align:left; border-bottom:1px solid #eee; padding:8px; font-size:14px; }
thead th{ background:#f3f5f9; }
tfoot td{ background:#e9f5e9; font-weight:700; }

.kpi{ display:inline-block; padding:6px 10px; border-radius:999px; font-weight:600; font-size:13px; }
.kpi.ok{ background:#d8f3dc; color:#1b4332; }
.kpi.bad{ background:#fde2e2; color:#8a1c1c; }
hr{ border:none; border-top:1px solid #eee; margin:12px 0; }
.note{ font-size:12px; color:#666; }

/* -------- Tabla derecha (consolidado) -------- */
#tabla-wrap{ position:relative; overflow:auto; }
#tabla-resumen{
  border-collapse:collapse;
  width:max-content;      /* mide su ancho natural */
  table-layout:fixed;     /* respeta <colgroup> */
  transform-origin:left top;
}

/* UNA SOLA LÍNEA por defecto en celdas */
#tabla-resumen th,
#tabla-resumen td{
  white-space:nowrap;
  word-break:keep-all;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Encabezados SIEMPRE una línea (sin saltos) */
#tabla-resumen thead th{
  white-space:nowrap !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  line-height:1.2;
  font-size:12px;
}

/* Columna RIS visible en una línea con elipsis */
#tabla-resumen td.col-ris{
  white-space:nowrap !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  word-break:keep-all !important;
}

/* Cuando agrupas por RIS, oculto la col RIS (TH y TD) */
#tabla-wrap.grouped th.col-ris,
#tabla-wrap.grouped td.col-ris{ display:none; }

/* Filas de grupo: pueden envolver (título del grupo) */
#tabla-resumen tr.group-row td{
  white-space:normal !important;
  word-break:break-word;
}

/* Modo compacto */
#tabla-wrap.compact #tabla-resumen{ font-size:12px; }
#tabla-wrap.compact #tabla-resumen th,
#tabla-wrap.compact #tabla-resumen td{ padding:2px 6px; line-height:1.15; }

/* -------- Tabs (EDA/IRA/…) -------- */
.tabs{ display:flex; gap:8px; flex-wrap:wrap; }
.tabs button{
  appearance:none;
  border:1px solid #d0d5dd;
  background:#f2f4f7;      /* fondo claro siempre */
  color:#101828;           /* texto oscuro siempre */
  padding:6px 12px;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}
.tabs button:hover{ background:#eaeef3; }
.tabs button.active{
  border-color:#84caff;
  background:#e6f2ff;      /* leve azul */
  color:#075985;           /* azul oscuro */
  box-shadow:0 0 0 2px rgba(13,110,253,.08) inset;
}

/* Controles pivot */
.pivot-controls{ display:flex; flex-wrap:wrap; align-items:center; gap:12px; }
.pivot-filters{ display:flex; gap:8px; align-items:center; }

/* Tabla pivot (series semanales) */
#pivot-wrap{
  margin-top:8px;
  overflow:auto;
  border:1px solid #e5e8ef;
  border-radius:8px;
}
#pivot-table{
  border-collapse:separate;
  border-spacing:0;
  font-size:12px;
  width:max-content;
}
#pivot-table thead th{
  position:sticky; top:0;
  background:#f5f7fb;
  z-index:2;
  white-space:nowrap;
  padding:6px 8px;
  border-bottom:1px solid #e0e3ea;
}
#pivot-table td, #pivot-table th{
  border-right:1px solid #eef1f6;
  padding:4px 8px;
  white-space:nowrap;
  word-break:keep-all;
  overflow-wrap:normal;
  hyphens:manual;
}
#pivot-table tbody tr:nth-child(odd){ background:#fafbfe; }
#pivot-table tfoot td{ font-weight:600; background:#eef7ed; }

/* Columna “texto” pegajosa del pivot */
.pv-sticky{
  position:sticky; left:0; z-index:1;
  background:#fff;
  min-width:260px;
}

/* Mini-sparkline */
.spark{ width:86px; height:18px; display:block; }
